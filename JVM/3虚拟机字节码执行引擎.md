# 字节码执行引擎

### 栈帧

虚拟机中方法调用和执行的数据结构

![1569747476106](.\pic\%5CUsers%5Cheyu%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1569747476106.png)

- 局部变量表

  用于存放方法参数和方法内部定义的局部变量，局部变量表以Slot为最小单位，一个Slot占4个字节，当储存32位以下的数据时直接填百储存，当存放long、double或者64位机器上的地址时，使用两个连续的Slot进行存储，且这两个Slot不可单独读取，只能一次性读取

  在非静态方法中，Slot的第0位索引总是该对象的引用，也就是this

  Slot是可重用的，在方法中当一个局部变量的值超出了作用域，那么这个变量的Slot就可以被其他变量使用，这会对垃圾收集产生一点影响



  ```java
  //不会进行垃圾回收
  public static void main（String[]args）（）{
      byte[]placeholder=new byte[64*1024*1024]；
      System.gc（）；
  }
  //也不会进行垃圾回收，因为Slot没被重新覆盖
  public static void main（String[]args）（）{
      {
      byte[]placeholder=new byte[64*1024*1024]；
      }
      System.gc（）；
  }
  //进行垃圾回收
  public static void main（String[]args）（）{
      {
      byte[]placeholder=new byte[64*1024*1024]；
      }
      int a = 1;
      System.gc（）；
  }
  ```

  在方法内的局部变量，不存在想加载静态变量时有两步赋值过程，局部变量在未赋值下操作，不会给予默认值，在使用时会无法编译

  ![1569749939049](.\pic\%5CUsers%5Cheyu%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1569749939049.png)

- 