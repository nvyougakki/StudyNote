## 队列（QUENE）

1. 一对一的关系，一个消息只能有一个消费者
2. 消息在不接受就不会消失，当队列有多个监听，将会平均分给这些监听

## 主题（TOPIC）

主题类是于微信公众号发消息

1. 









### 消息

- 头
  - 持久化   默认持久化
  - 过期时间  默认不过期，参数为0
  - 目的地
  - 消息ID
- 体
- 属性

#### 消息的事务与签收

事务：偏向生产者，

- 开启事务一定需要执行session.commit()才算交消息
- 生产者不执行commit消息将不会入队
- 消费者不执行将会导致重复收到消息

签收：偏向消费者

- 签收模式主要分为自动签收和手动签收
- 自动签收时，消息将会自动签收
- 手动签收（Session.CLIENT_ACKNOWLEDGE）时，在关闭事务的情况下，读取消息是需要执行message.acknowledge()方法，否则将会重复读取消息
- 手动签收时，当开启事务，无论签收设置为何，只要执行了commit，就不会导致重复收取消息

|                               | 开启事务（执行commit） | 开启事务（不执行commit） | 关闭事务 |
| ----------------------------- | ---------------------- | ------------------------ | -------- |
| 自动签收                      | 不会重复               | 会重复                   | 不会重复 |
| 手动签收（执行acknowledge）   | 不会重复               | 会重复                   | 不会重复 |
| 手动签收（不执行acknowledge） | 不会重复               | 会重复                   | 会重复   |

生产者